{{ header }}{{ column_left }}
<div id="content">
 <div class="page-header">
    <div class="container-fluid">
		<div class="pull-right">
			<div class="buttons">
				<a class="btn btn-primary" onclick="$('#form-megamenuvh-item').submit();" class="button"><span  data-toggle="tooltip" title="{{ button_save }}" ><i class="fa fa-save"></i></span></a>
				<a class="btn btn-default" onclick="location = '{{ cancel }}';" class="button"><span  data-toggle="tooltip" title="{{ button_cancel }}" ><i class="fa fa-reply"></i></span></a>
			</div>
		</div>
		<h1>{{ heading_title }}</h1>
		<ul class="breadcrumb">
			{% for breadcrumb in breadcrumbs %}
			<li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>
			{% endfor %}
		</ul>
    </div>
  </div>
	<div class="container-fluid">
		{% if (error_warning) %}
			<div class="alert alert-danger">{{ error_warning }}</div>
		{% endif %}
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit_form }}</h3>
			</div>
		</div>
		<div class="panel-body">
			<form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-megamenuvh-item" class="form-horizontal">
				<div class="form-group required">
					<label class="col-sm-3 control-label">{{ ns_text_menu_name }}</label>
					<div class="col-sm-9">
						{% for language in languages %}
							<div class="input-group pull-left">
								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
								<input id="namemenu_{{ language['language_id'] }}" class="form-control" type="text" name="menuvh[namemenu][{{ language['language_id'] }}]" value="{{ menuvh['namemenu'][language['language_id']] is defined ? menuvh['namemenu'][language['language_id']] : '' }}" />
							</div>
							{% if (error_namemenu[language['language_id']] is defined) %}
								<div class="text-danger">{{ error_namemenu[language['language_id']] }}</div>
							{% endif %}
						{% endfor %}
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label">{{ text_dop_info_mv }}</label>
					<div class="col-sm-9">
						{% for language in languages %}
							<div class="input-group pull-left">
								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
								<input id="dop_info_vm_{{ language['language_id'] }}" class="form-control" type="text" name="menuvh[dop_info_vm][{{ language['language_id'] }}]" value="{{ menuvh['dop_info_vm'][language['language_id']] is defined ? menuvh['dop_info_vm'][language['language_id']] : '' }}" />
							</div>
						{% endfor %}
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="input-status-additional-menu">{{ ns_text_additional_menu }}</label>
					<div class="col-sm-9">
						<select name="menuvh[additional_menu]" id="input-status-additional-menu" class="form-control">
							{% if (menuvh['additional_menu'] == 'additional') %}
								<option value="left">{{ text_main_menu }}</option>
								<option value="additional" selected="selected">{{ text_dop_menu }}</option>
							{% else %}
								<option value="left" selected="selected">{{ text_main_menu }}</option>
								<option value="additional">{{ text_dop_menu }}</option>
							{% endif %}
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="input-mobile-status-menu">{{ text_status_mobile }}</label>
					<div class="col-sm-9">
						<select name="menuvh[mobile_status]" id="input-mobile-status-menu" class="form-control">
							{% if (menuvh['mobile_status']) %}
							<option value="1" selected="selected">{{ text_enabled }}</option>
							<option value="0">{{ text_disabled }}</option>
							{% else %}
							<option value="1">{{ text_enabled }}</option>
							<option value="0" selected="selected">{{ text_disabled }}</option>
							{% endif %}
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label">{{ ns_text_menu_link }}</label>
					<div class="col-sm-9">
						{% for language in languages %}
							<div class="input-group pull-left">
								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
								<input id="linkmenu_{{ language['language_id'] }}" class="form-control" type="text" name="menuvh[link][{{ language['language_id'] }}]" value="{{ menuvh['link'][language['language_id']] is defined ? menuvh['link'][language['language_id']] : '' }}" />
							</div>
							{% if (error_link[language['language_id']] is defined) %}
								<div class="text-danger">{{ error_link[language['language_id']] }}</div>
							{% endif %}
						{% endfor %}
					</div>
				</div>
				<div class="form-group required">
					<label class="col-sm-3 control-label">{{ ns_text_type }}</label>
					<div class="col-sm-9">
						<select onChange="sel_type_category()"  name="menuvh[menu_type]" id="input-menu-type" class="form-control">
							<option value="0">{{ text_select }}</option>
							<option value="category" {% if (menuvh['menu_type'] is defined and (menuvh['menu_type'] == 'category')) %} selected="selected" {% endif %}>{{ ns_text_type_category }}</option>
							<option value="html" {% if (menuvh['menu_type'] is defined and (menuvh['menu_type'] == 'html')) %} selected="selected" {% endif %}>{{ ns_text_type_html }}</option>
							<option value="manufacturer" {% if (menuvh['menu_type'] is defined and (menuvh['menu_type'] == 'manufacturer')) %} selected="selected" {% endif %}>{{ ns_text_type_manufacturer }}</option>
							<option value="information" {% if (menuvh['menu_type'] is defined and (menuvh['menu_type'] == 'information')) %} selected="selected" {% endif %}>{{ ns_text_type_information }}</option>
							<option value="product" {% if (menuvh['menu_type'] is defined and (menuvh['menu_type'] == 'product')) %} selected="selected" {% endif %}>{{ ns_text_type_product }}</option>
							<option value="freelink" {% if (menuvh['menu_type'] is defined and (menuvh['menu_type'] == 'freelink')) %} selected="selected" {% endif %}>{{ ns_text_type_freelink }}</option>
							<option value="link" {% if (menuvh['menu_type'] is defined and (menuvh['menu_type'] == 'link')) %} selected="selected" {% endif %}>{{ ns_text_type_link }}</option>
						</select>
						{% if (error_menu_type is not empty) %}
							<div class="text-danger">{{ error_menu_type }}</div>
						{% endif %}
					</div>
				</div>

				<div class="show_elements show_elements_category">
					<div class="form-group required">
						<label class="col-sm-3 control-label" for="input_variant_category">{{ ns_type_dropdown_list }}</label>
						<div class="col-sm-9">
							<select onChange="sel_type_category()" name="menuvh[category_setting][variant_category]" id="input_variant_category" class="form-control">
								<option value="simple" {% if (variant_category is defined and (variant_category == 'simple')) %} selected="selected" {% endif %}>{{ ns_type_dropdown_simple }}</option>
								<option value="full" {% if (variant_category is defined and (variant_category == 'full')) %} selected="selected" {% endif %}>{{ ns_type_dropdown_full }}</option>
								<option value="full_image" {% if (variant_category is defined and (variant_category == 'full_image')) %} selected="selected" {% endif %}>{{ ns_type_dropdown_full_image }}</option>
								<option value="full_masonry" {% if (variant_category is defined and (variant_category == 'full_masonry')) %} selected="selected" {% endif %}>{{ ns_type_dropdown_full_masonry }}</option>
								<option value="full_image_masonry" {% if (variant_category is defined and (variant_category == 'full_image_masonry')) %} selected="selected" {% endif %}>{{ ns_type_dropdown_full_masonry_image }}</option>
								<option value="full_3_level" {% if (variant_category is defined and (variant_category == 'full_3_level')) %} selected="selected" {% endif %}>{{ ns_type_dropdown_full_3_level }}</option>
								<option value="full_3_level_image" {% if (variant_category is defined and (variant_category == 'full_3_level_image')) %} selected="selected" {% endif %}>{{ ns_type_dropdown_full_3_level_image }}</option>
							</select>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label" for="input-category_show_subcategory">{{ ns_show_sub_categories }}</label>
						<div class="col-sm-9">
							<select id="input-category_show_subcategory" name="menuvh[category_setting][show_sub_category]" class="form-control">
								{% if (show_sub_category) %}
									<option value="1" selected="selected">{{ text_enabled }}</option>
									<option value="0">{{ text_disabled }}</option>
								{% else %}
									<option value="1">{{ text_enabled }}</option>
									<option value="0" selected="selected">{{ text_disabled }}</option>
								{% endif %}
							</select>
						</div>
					</div>
					<div class="form-group type_full_show">
						<label class="col-sm-3 control-label">{{ limit_subcategories }}</label>
						<div class="col-sm-9">
							<input type="text" name="menuvh[category_setting][limit_subcat]" value="{{ limit_subcat is defined ? limit_subcat : 8 }}" class="form-control" />
						</div>
					</div>
					<div class="form-group number_column_sc">
						<label class="col-sm-3 control-label" for="input-category_show_subcategory">{{ number_of_column_sc }}</label>
						<div class="col-sm-9">
							<select id="input-category_show_subcategory" name="menuvh[category_setting][number_column_sc]" class="form-control">
								{% if (number_column_sc is defined and (number_column_sc == 6)) %}
									<option value="6" selected="selected">2</option>
									<option value="4">3</option>
									<option value="3">4</option>
									<option value="1-5">5</option>
								{% elseif (number_column_sc == 4) %}
									<option value="6">2</option>
									<option value="4" selected="selected">3</option>
									<option value="3">4</option>
									<option value="1-5">5</option>
								{% elseif (number_column_sc == 3) %}
									<option value="6">2</option>
									<option value="4">3</option>
									<option value="3" selected="selected">4</option>
									<option value="1-5">5</option>
								{% else %}
									<option value="6">2</option>
									<option value="4">3</option>
									<option value="3">4</option>
									<option value="1-5" selected="selected">5</option>
								{% endif %}
							</select>
						</div>
					</div>
					<div class="form-group type_full_show_img">
						<label class="col-sm-3 control-label">{{ ns_text_product_width }}</label>
						<div class="col-sm-3">
							<input type="text" name="menuvh[category_setting][category_img_width]" value="{{ category_img_width is defined ? category_img_width : 50 }}" placeholder="{{ ns_text_product_width }}" class="form-control" />
						</div>
						<label class="col-sm-3 control-label">{{ ns_text_product_height }}</label>
						<div class="col-sm-3">
							<input type="text" name="menuvh[category_setting][category_img_height]" value="{{ category_img_height is defined ? category_img_height : 50 }}" placeholder="{{ ns_text_product_height }}" class="form-control" />
						</div>
					</div>

					<div class="form-group">
						<label class="col-sm-3 control-label">{{ text_arbitrary_links }}</label>
						<div class="col-sm-9">
							<div id="arbitrary_links">
								{% set row_al = 0 %}
								{% if (arbitrary_links is not empty) %}
									{% for arbitrary_link in arbitrary_links %}
										<div id="al-row-{{ row_al }}" class="panel panel-default">
											<div class="panel-heading" id="al-heading-{{ row_al }}">
												<div class="panel-title">
													<i class="fa fa-hand-grab-o" aria-hidden="true"></i>
													<a class="item_title" href="javascript:void(0)" data-toggle="collapse" data-parent="#arbitrary_links" data-toggle="collapse" data-target="#al-menu-item-{{ row_al }}" aria-controls="al-menu-item-{{ row_al }}" aria-expanded="false">{{ arbitrary_link[lang_id].item_name is defined ? arbitrary_link[lang_id].item_name : 'Name Menu Items' }}</a>
													<a class="btn-link-remove btn-danger" onclick="$('#al-row-{{ row_al }}').remove(); return false;" href="javascript:void(0)"><i class="fa fa-trash-o" aria-hidden="true"></i> {{ text_delete }}</a>
												</div>
											</div>
											<div id="al-menu-item-{{ row_al }}" class="panel-collapse collapse" aria-labelledby="al-heading-{{ row_al }}" data-parent="#arbitrary_links">
												<div class="panel-body">
													<div class="form-group">
														<label class="col-sm-3 control-label">{{ ns_text_menu_name }}</label>
														<div class="col-sm-9">
															{% for language in languages %}
																<div class="input-group pull-left">
																	<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																	<input class="form-control change_item_title" type="text" name="menuvh[arbitrary_links][{{ row_al }}][{{ language.language_id }}][item_name]" value="{{ arbitrary_link[language.language_id].item_name is defined ? arbitrary_link[language.language_id].item_name : '' }}" />
																</div>
															{% endfor %}
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-3 control-label">{{ ns_text_menu_link }}</label>
														<div class="col-sm-9">
															{% for language in languages %}
																<div class="input-group pull-left">
																	<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																	<input class="form-control" type="text" name="menuvh[arbitrary_links][{{ row_al }}][{{ language.language_id }}][item_link]" value="{{ arbitrary_link[language.language_id].item_link is defined ? arbitrary_link[language.language_id].item_link : '' }}" />
																</div>
															{% endfor %}
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-3 control-label">{{ text_al_links_children }}</label>
														<div class="col-sm-9">
															{% set row_al2_level = 0 %}
															{% if (arbitrary_link.children is not empty) %}
																<div id="al-box-children-{{ row_al }}">
																	{% for al_children in arbitrary_link.children %}
																		<div id="al-children-row-{{ row_al }}-{{ row_al2_level }}" class="panel panel-default">
																			<div class="panel-heading" id="al-heading-children-{{ row_al }}-{{ row_al2_level }}">
																				<div class="panel-title">
																					<i class="fa fa-hand-grab-o" aria-hidden="true"></i>
																					<a class="item_title" href="javascript:void(0)" data-toggle="collapse" data-parent="#al-children-row-{{ row_al }}-{{ row_al2_level }}" data-toggle="collapse" data-target="#al-children-item-{{ row_al }}-{{ row_al2_level }}" aria-controls="al-children-item-{{ row_al }}-{{ row_al2_level }}" aria-expanded="false">{{ al_children[lang_id].item_name is defined ? al_children[lang_id].item_name : 'Name Menu Items' }}</a>
																					<a class="btn-link-remove btn-danger" onclick="$('#al-children-row-{{ row_al }}-{{ row_al2_level }}').remove();return false;" href="javascript:void(0)"><i class="fa fa-trash-o" aria-hidden="true"></i> {{ text_delete }}</a>
																				</div>
																			</div>
																			<div id="al-children-item-{{ row_al }}-{{ row_al2_level }}" class="panel-collapse collapse" aria-labelledby="al-heading-children-{{ row_al }}-{{ row_al2_level }}" data-parent="#al-children-row-{{ row_al }}-{{ row_al2_level }}">
																				<div class="form-group">
																					<label class="col-sm-3 control-label">{{ ns_text_menu_name }}</label>
																					<div class="col-sm-9">
																						{% for language in languages %}
																							<div class="input-group pull-left">
																								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																								<input class="form-control change_item_title" type="text" name="menuvh[arbitrary_links][{{ row_al }}][children][{{ row_al2_level }}][{{ language['language_id'] }}][item_name]" value="{{ al_children[language.language_id].item_name is defined ? al_children[language.language_id].item_name : '' }}" />
																							</div>
																						{% endfor %}
																					</div>
																				</div>
																				<div class="form-group">
																					<label class="col-sm-3 control-label">{{ ns_text_menu_link }}</label>
																					<div class="col-sm-9">
																						{% for language in languages %}
																							<div class="input-group pull-left">
																								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
																								<input class="form-control" type="text" name="menuvh[arbitrary_links][{{ row_al }}][children][{{ row_al2_level }}][{{ language['language_id'] }}][item_link]" value="{{ al_children[language.language_id].item_link is defined ? al_children[language.language_id].item_link : '' }}" />
																							</div>
																						{% endfor %}
																					</div>
																				</div>
																			</div>
																		</div>
																	{% set row_al2_level = row_al2_level + 1 %}
																	{% endfor %}
																	<input type="hidden" id="al-children-row-number-{{ row_al }}" value="{{ row_al2_level }}">
																</div>
															{% endif %}
															<a class="btn btn-success" onclick="addArbitraryLinks2Lv('{{ row_al }}');">{{ text_add }}</a>
														</div>
													</div>
												</div>
											</div>
										</div>
									{% set row_al = row_al + 1 %}
									{% endfor %}
								{% endif %}
							</div>
							<button type="button" onclick="addArbitraryLinks();" class="btn btn-primary"><i class="fa fa-plus-circle"></i> {{ text_add_form }}</button>
						</div>
					</div>
<script>
function updateValue(e) {
	if(e.target.value == ''){
		$(this).closest('.panel-default').find('.panel-title a.item_title').html('Name Menu Items');
	} else {
		$(this).closest('.panel-default').find('.panel-title a.item_title').html(e.target.value);
	}
}

var arbitrary_links = document.getElementById('arbitrary_links');
Sortable.create(arbitrary_links, {
	handle: '.fa-hand-grab-o',
	animation: 150
});

var row_al = '{{ row_al }}';

function addArbitraryLinks(){

	html  = '<div id="al-row-' + row_al +'" class="panel panel-default">';

	html += '	<div class="panel-heading" id="al-heading-' + row_al +'">';
	html += '		<div class="panel-title">';
	html += '			<i class="fa fa-hand-grab-o" aria-hidden="true"></i>';
	html += '			<a class="item_title" href="javascript:void(0)" data-toggle="collapse" data-parent="#arbitrary_links" data-toggle="collapse" data-target="#al-menu-item-' + row_al +'" aria-controls="al-menu-item-' + row_al +'" aria-expanded="false">Name Menu Items</a>';
	html += '			<a class="btn-link-remove btn-danger" onclick="$(\'#al-row-' + row_al +'\').remove(); return false;"><i class="fa fa-trash-o" aria-hidden="true"></i> {{ text_delete }}</a>';
	html += '		</div>';
	html += '	</div>';

	html += '	<div id="al-menu-item-' + row_al +'" class="panel-collapse collapse" aria-labelledby="al-heading-' + row_al +'" data-parent="#arbitrary_links">';
	html += '		<div class="panel-body">';
	html += '			<div class="form-group">';
	html += '				<label class="col-sm-3 control-label">{{ ns_text_menu_name }}</label>';
	html += '				<div class="col-sm-9">';
								{% for language in languages %}
	html += '					<div class="input-group pull-left">';
	html += '						<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	html += '						<input class="form-control change_item_title" type="text" name="menuvh[arbitrary_links][' + row_al +'][{{ language.language_id }}][item_name]" value="" />';
	html += '					</div>';
								{% endfor %}
	html += '				</div>';
	html += '			</div>';
	html += '			<div class="form-group">';
	html += '				<label class="col-sm-3 control-label">{{ ns_text_menu_link }}</label>';
	html += '					<div class="col-sm-9">';
									{% for language in languages %}
	html += '						<div class="input-group pull-left">';
	html += '							<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	html += '							<input class="form-control" type="text" name="menuvh[arbitrary_links][' + row_al +'][{{ language.language_id }}][item_link]" value="" />';
	html += '						</div>';
									{% endfor %}
	html += '				</div>';
	html += '			</div>';

	html += '			<div class="form-group">';
	html += '				<label class="col-sm-3 control-label">{{ text_al_links_children }}</label>';
	html += '				<div class="col-sm-9">';
	html += '					<div id="al-box-children-' + row_al +'">';
	html += '						<input type="hidden" id="al-children-row-number-'+ row_al +'" value="0">';
	html += '					</div>';
	html += '					<a class="btn btn-success" onclick="addArbitraryLinks2Lv(' + row_al +');">{{ text_add }}</a>';
	html += '				</div>';
	html += '			</div>';

	html += '		</div>';
	html += '	</div>';

	html += '</div>';

	$('#arbitrary_links').append(html);

	$('#al-menu-item-' + row_al +' .change_item_title').each(function (i, elem) {
		elem.addEventListener("input", updateValue);
	});

	row_al++;
}

function addArbitraryLinks2Lv(row_al) {
	var row_al2_level = $('#al-children-row-number-'+ row_al).val();
	$('#al-children-row-number-'+ row_al).val(parseInt(row_al2_level) + 1);

	html  = '<div id="al-children-row-'+ row_al +'-'+ row_al2_level +'" class="panel panel-default">';
	html += '	<div class="panel-heading" id="al-heading-children-'+ row_al +'-'+ row_al2_level +'">';
	html += '		<div class="panel-title">';
	html += '			<i class="fa fa-hand-grab-o" aria-hidden="true"></i>';
	html += '			<a class="item_title" href="javascript:void(0)" data-toggle="collapse" data-parent="#al-children-row-'+ row_al +'-'+ row_al2_level +'" data-toggle="collapse" data-target="#al-children-item-'+ row_al +'-'+ row_al2_level +'" aria-controls="al-children-item-'+ row_al +'-'+ row_al2_level +'" aria-expanded="false">Name Menu Items</a>';
	html += '			<a class="btn-link-remove btn-danger" onclick="$(\'#al-children-row-'+ row_al +'-'+ row_al2_level +'\').remove();return false;" href="javascript:void(0)"><i class="fa fa-trash-o" aria-hidden="true"></i> {{ text_delete }}</a>';
	html += '		</div>';
	html += '	</div>';
	html += '	<div id="al-children-item-'+ row_al +'-'+ row_al2_level +'" class="panel-collapse collapse" aria-labelledby="al-heading-children-'+ row_al +'-'+ row_al2_level +'" data-parent="#al-children-row-'+ row_al +'-'+ row_al2_level +'">';
	html += '		<div class="form-group">';
	html += '			<label class="col-sm-3 control-label">{{ ns_text_menu_name }}</label>';
	html += '			<div class="col-sm-9">';
								{% for language in languages %}
	html += '					<div class="input-group pull-left">';
	html += '						<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	html += '						<input class="form-control change_item_title" type="text" name="menuvh[arbitrary_links]['+ row_al +'][children]['+ row_al2_level +'][{{ language.language_id }}][item_name]" value="" />';
	html += '					</div>';
								{% endfor %}
	html += '			</div>';
	html += '		</div>';
	html += '		<div class="form-group">';
	html += '			<label class="col-sm-3 control-label">{{ ns_text_menu_link }}</label>';
	html += '			<div class="col-sm-9">';
								{% for language in languages %}
	html += '					<div class="input-group pull-left">';
	html += '						<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>';
	html += '						<input class="form-control" type="text" name="menuvh[arbitrary_links]['+ row_al +'][children]['+ row_al2_level +'][{{ language.language_id }}][item_link]" value="" />';
	html += '					</div>';
								{% endfor %}
	html += '			</div>';
	html += '		</div>';
	html += '	</div>';
	html += '</div>';


	$('#al-box-children-' + row_al).append(html);

	$('#al-children-item-'+ row_al +'-'+ row_al2_level +' .change_item_title').each(function (i, elem) {
		elem.addEventListener("input", updateValue);
	});

	row_al2_level++;
}

document.addEventListener("DOMContentLoaded", function () {
  $('.change_item_title').each(function (i, elem) {
  	 elem.addEventListener("input", updateValue);
  });
});

$('[id^="al-box-children-"]').each(function (i, elem) {
	Sortable.create(elem, {
		handle: '.fa-hand-grab-o',
		animation: 150
	});
});

</script>
<style>
	.panel-title {
		margin-right: 85px;
		cursor: pointer;
	}
	.panel-default {
		border-top-width: 1px;
		border-color: #e8e8e8;
	}
	.panel-default .btn-link-remove{
		position: absolute;
		right: 10px;
		top: 9.5px;
		z-index: 10;
	}
	.btn-link-remove {
		color:#fff !important;
		font-size: 12px;
		padding: 2px 8px;
		border-radius: 4px;
	}
	.btn-link-remove i{
		margin-right: 0;
		font-size: 12px;
	}
</style>

					<div class="form-group">
						<label class="col-sm-3 control-label" for="input-category">{{ ns_text_category }}</label>
						<div class="col-sm-9">
							<input type="text" name="category" value="" placeholder="{{ ns_text_category }}" id="input-category" class="form-control" />
							<div id="category-category" class="well well-sm" style="height: 450px; overflow: auto;">
								{% if (category_list_sel is not empty) %}
									{% for category_list in category_list_sel %}
										<div class="row-category-menu" id="category-item-{{ category_list['category_id'] }}">
											<i class="del-cat fa fa-minus-circle"></i>
											{{ category_list['name'] }}
											<input type="hidden" name="menuvh[category_setting][category_list][]" value="{{ category_list['category_id'] }}" />
										</div>
									{% endfor %}
								{% endif %}
							</div>
						</div>
					</div>
				</div>
				<div class="show_elements show_elements_html">
					<label class="col-sm-3 control-label">{{ ns_text_html_description }}</label>
					<div class="col-sm-9">
						<ul class="nav nav-tabs" id="language_html">
							{% for language in languages %}
								<li><a href="#language_html_{{ language['language_id'] }}" data-toggle="tab"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /> {{ language['name'] }}</a></li>
							{% endfor %}
						</ul>
						<div class="tab-content">
							{% for language in languages %}
								<div class="tab-pane" id="language_html_{{ language['language_id'] }}">
									<div class="form-group">
										<textarea data-toggle="summernote" data-lang="{{ summernote }}" class="form-control" name="menuvh[html_block][{{ language['language_id'] }}]" id="html_description_{{ language['language_id'] }}">{{ html_block[language['language_id']] is defined ? html_block[language['language_id']] : '' }}</textarea>
									</div>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
				<div class="show_elements show_elements_manufacturer">
					<div class="form-group">
						<label class="col-sm-3 control-label">{{ ns_type_dropdown_list }}</label>
						<div class="col-sm-9">
							<select name="menuvh[manufacturers_setting][type_manuf]" class="form-control">
								<option {% if (type_manuf is defined and (type_manuf == 'type_image')) %} selected="selected" {% endif %} value="type_image">{{ ns_type_manuf_image }}</option>
								<option {% if (type_manuf is defined and (type_manuf == 'type_alphabet')) %} selected="selected" {% endif %} value="type_alphabet">{{ ns_type_manuf_alphabet_image }}</option>

							</select>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label">{{ ns_text_manufacturer }}</label>
						<div class="col-sm-9">
							<div class="well well-sm">
								{% for manufacturer in manufacturers_list %}
									<div class="checkbox">
										<label>
											{% if manufacturer.manufacturer_id in manufacturers_sel_id %}
												<input checked="checked" type="checkbox" name="menuvh[manufacturers_setting][manufacturers_list][]" value="{{ manufacturer['manufacturer_id']}}"/> {{ manufacturer['name']}}
											{% else %}
												<input type="checkbox" name="menuvh[manufacturers_setting][manufacturers_list][]" value="{{ manufacturer['manufacturer_id']}}"/> {{ manufacturer['name']}}
											{% endif %}
										</label>
									</div>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>

				<div class="show_elements show_elements_information">
					<div class="form-group">
						<label class="col-sm-3 control-label">{{ ns_text_information }}</label>
						<div class="col-sm-9">
							<div class="well well-sm">
								{% for information in informations_list %}
									<div class="checkbox">
										<label>
											{% if information.information_id in menuvh['informations_sel_id'] %}
												<input checked="checked" type="checkbox" name="menuvh[informations_list][]" value="{{ information['information_id'] }}"/> {{ information['title'] }}
											{% else %}
												<input type="checkbox" name="menuvh[informations_list][]" value="{{ information['information_id'] }}"/> {{ information['title'] }}
											{% endif %}
										</label>
									</div>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
				<div class="show_elements show_elements_product">
					<div class="form-group">
						<label class="col-sm-3 control-label" for="input-product_width">{{ ns_text_product_width }}</label>
						<div class="col-sm-9">
							<input type="text" name="menuvh[product][product_width]" value="{{ product_width is defined ? product_width : 50 }}" placeholder="{{ ns_text_product_width }}" id="input-product_width" class="form-control" />
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label" for="input-product_height">{{ ns_text_product_height }}</label>
						<div class="col-sm-9">
							<input type="text" name="menuvh[product][product_height]" value="{{ product_height is defined ? product_height : 50 }}" placeholder="{{ ns_text_product_height }}" id="input-product_height" class="form-control" />
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label" for="input-product">{{ ns_text_product }}</label>
						<div class="col-sm-9">
							<input type="text" name="product" value="" placeholder="{{ ns_text_product }}" id="input-product" class="form-control" />
							<div id="product-product" class="well well-sm" style="height: 250px; overflow: auto;">
								{% if (products_list_sel is not empty) %}
									{% for products_list in products_list_sel %}
									<div id="product-item-{{ products_list['product_id'] }}"><i class="fa fa-minus-circle"></i> {{ products_list['name'] }}
										<input type="hidden" name="menuvh[product][products_list][]" value="{{ products_list['product_id'] }}" />
									</div>
									{% endfor %}
								{% endif %}
							</div>
						</div>
					</div>
				</div>

				<div class="show_elements show_elements_link">
					<div class="form-group">
						<label class="col-sm-3 control-label" for="input-product">{{ ns_text_link_options }}</label>
						<div class="col-sm-9">
							<select id="input-use_target_blank" name="menuvh[use_target_blank]" class="form-control">
								{% if (use_target_blank) %}
									<option value="1" selected="selected">{{ text_enabled }}</option>
									<option value="0">{{ text_disabled }}</option>
								{% else %}
									<option value="1">{{ text_enabled }}</option>
									<option value="0" selected="selected">{{ text_disabled }}</option>
								{% endif %}
							</select>
						</div>
					</div>
				</div>
				<div class="show_elements show_elements_freelink">
					<div class="form-group required">
						<label class="col-sm-3 control-label" for="input_variant_category">{{ ns_type_dropdown_list }}</label>
						<div class="col-sm-9">
							<select onChange="sel_type_category()" name="menuvh[sfl][variant_category]" id="input_variant_freelink" class="form-control">
								<option {% if (sfl['variant_category'] is defined and (sfl['variant_category'] == 'simple')) %} selected="selected" {% endif %} value="simple">{{ ns_type_dropdown_simple }}</option>
								<option {% if (sfl['variant_category'] is defined and (sfl['variant_category'] == 'full')) %} selected="selected" {% endif %} value="full">{{ ns_type_dropdown_full }}</option>
								<option {% if (sfl['variant_category'] is defined and (sfl['variant_category'] == 'full_image')) %} selected="selected" {% endif %} value="full_image">{{ ns_type_dropdown_full_image }}</option>
								<option {% if (sfl['variant_category'] is defined and (sfl['variant_category'] == 'full_masonry')) %} selected="selected" {% endif %} value="full_masonry">{{ ns_type_dropdown_full_masonry }}</option>
								<option {% if (sfl['variant_category'] is defined and (sfl['variant_category'] == 'full_image_masonry')) %} selected="selected" {% endif %} value="full_image_masonry">{{ ns_type_dropdown_full_masonry_image }}</option>
								<option {% if (sfl['variant_category'] is defined and (sfl['variant_category'] == 'full_3_level')) %} selected="selected" {% endif %} value="full_3_level">{{ ns_type_dropdown_full_3_level }}</option>
							</select>
						</div>
					</div>
					<div class="form-group freelink_number_column_sc">
						<label class="col-sm-3 control-label">{{ number_of_column_sc }}</label>
						<div class="col-sm-9">
							<select id="input-category_show_subcategory" name="menuvh[sfl][number_column_sc]" class="form-control">
								{% if (sfl['number_column_sc'] is defined and (sfl['number_column_sc'] == 6)) %}
									<option value="6" selected="selected">2</option>
									<option value="4">3</option>
									<option value="3">4</option>
									<option value="1-5">5</option>
								{% elseif (sfl['number_column_sc'] == 4) %}
									<option value="6">2</option>
									<option value="4" selected="selected">3</option>
									<option value="3">4</option>
									<option value="1-5">5</option>
								{% elseif (sfl['number_column_sc'] == 3) %}
									<option value="6">2</option>
									<option value="4">3</option>
									<option value="3" selected="selected">4</option>
									<option value="1-5">5</option>
								{% else %}
									<option value="6">2</option>
									<option value="4">3</option>
									<option value="3">4</option>
									<option value="1-5" selected="selected">5</option>
								{% endif %}
							</select>
						</div>
					</div>
					<div class="form-group type_full_show_img">
						<label class="col-sm-3 control-label">{{ ns_text_product_width }}</label>
						<div class="col-sm-3">
							<input type="text" name="menuvh[sfl][freelink_img_width]" value="{{ sfl['freelink_img_width'] is defined?sfl['freelink_img_width']:50}}" placeholder="{{ ns_text_product_width }}" class="form-control" />
						</div>
						<label class="col-sm-3 control-label">{{ ns_text_product_height }}</label>
						<div class="col-sm-3">
							<input type="text" name="menuvh[sfl][freelink_img_height]" value="{{ sfl['freelink_img_height'] is defined?sfl['freelink_img_height']:50}}" placeholder="{{ ns_text_product_height }}" class="form-control" />
						</div>
					</div>

					<ul class="nav nav-tabs" id="language-freelink-menu">
						{% for language in languages %}
						<li><a href="#language-freelink-{{ language['language_id'] }}" data-toggle="tab">
						<img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /> {{ language['name'] }}</a></li>
						{% endfor %}
					</ul>
					<div class="tab-content">
					{% for language in languages %}
						<div class="tab-pane" id="language-freelink-{{ language['language_id'] }}">
							<table id="freelinkitems" class="table table-bordered table-hover">
								<thead>
									<tr>
										<td>{{ ns_text_thumb }}</td>
										<td>{{ ns_text_menu_name }}</td>
										<td>{{ ns_text_type_link }}</td>
										<td>{{ column_3level }}</td>
										<td>{{ ns_text_sort_menu }}</td>
										<td></td>
									</tr>
								</thead>
								<tbody>
								{% set freelinkitem_row = 0 %}
								{% if (freelink_items[language['language_id']] is defined) %}
								{% for freelink_item in freelink_items[language['language_id']] %}
									<tr id="freelinkitem-row{{ freelinkitem_row }}">
										<td class="text-center">
											<a href="" id="thumb-image-freelink-{{ freelinkitem_row }}-{{ language['language_id'] }}" data-toggle="image" class="img-thumbnail"><img src="{{ freelink_item['thumb'] }}" alt="" title="" data-placeholder="{{ placeholder }}"  /></a>
											<input type="hidden" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][image]" value="{{ freelink_item['image'] }}" id="input-image-freelink-{{ freelinkitem_row }}-{{ language['language_id'] }}" />
										</td>
										<td class="text-left">
											<input class="form-control" type="text" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][title]" value="{{ freelink_item['title'] }}" />
										</td>
										<td class="text-left">
											<input class="form-control" type="text" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][link]" value="{{ freelink_item['link'] }}" />
										</td>
										<td class="text-left ns-input-group" style="min-width:250px;">
											{% set freelinkitem_row3level = 0 %}
											<div id="subcatfreelink{{ freelinkitem_row }}">
												{% if (freelink_item['subcat'] is defined) %}
												{% for subcat3level in freelink_item['subcat'] %}
													<div id="subcatfreelink-row-{{ freelinkitem_row }}{{ freelinkitem_row3level }}">
														<div class="input-group">
															<div class="input-group-btn"><a class="btn btn-success sortable-module" href="javascript:void(0)"><i class="fa fa-hand-rock-o" aria-hidden="true"></i></a></div>
															<div class="input-group-btn">
																<a href="" id="thumb-image-freelink-3lv-{{ freelinkitem_row }}-{{ freelinkitem_row3level }}-{{ language['language_id'] }}" data-toggle="image" class="img-thumbnail">
																	<img src="{{ subcat3level['thumb'] }}" alt="" title="" data-placeholder="{{ placeholder }}"  />
																</a>
																<input type="hidden" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][subcat][{{ freelinkitem_row3level }}][image]" value="{{ subcat3level['image'] }}" id="input-image-freelink-3lv-{{ freelinkitem_row }}-{{ freelinkitem_row3level }}-{{ language['language_id'] }}" />
															</div>
															<input class="form-control" type="text" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][subcat][{{ freelinkitem_row3level }}][title]" value="{{ subcat3level['title'] is defined ? subcat3level['title'] : '' }}" />
															<input class="form-control" type="text" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][subcat][{{ freelinkitem_row3level }}][link]" value="{{ subcat3level['link'] is defined ? subcat3level['link'] : '' }}" />
															<span class="input-group-btn"><a class="btn btn-danger" onclick="$('#language-freelink-{{ language['language_id'] }} #subcatfreelink-row-{{ freelinkitem_row }}{{ freelinkitem_row3level }}').remove();" data-toggle="tooltip" title="{{ text_delete }}"><i class="fa fa-trash-o"></i></a></span>
														</div>

														<div class="freelink-4lv-list">
															{% set fl_4lv_row = 0 %}
															{% if freelink_item['subcat'][freelinkitem_row3level]['subcat'] is defined %}
																{% for subcat4level in freelink_item['subcat'][freelinkitem_row3level]['subcat'] %}
																	<div id="freelink-4lv-item-{{ freelinkitem_row }}-{{ freelinkitem_row3level }}-{{ fl_4lv_row }}" class="freelink-4lv-item mt-10">
																		<div class="input-group">
																			<div class="input-group-btn"><a class="btn btn-success handle" href="javascript:void(0)"><i class="fa fa-hand-rock-o" aria-hidden="true"></i></a></div>
																			<div class="input-group-btn">
																				<a href="" id="thumb-image-freelink-4lv-{{ freelinkitem_row }}-{{ freelinkitem_row3level }}-{{ fl_4lv_row }}-{{ language['language_id'] }}" data-toggle="image" class="img-thumbnail">
																					<img src="{{ subcat4level['thumb'] }}" alt="" title="" data-placeholder="{{ placeholder }}"  />
																				</a>
																				<input type="hidden" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][subcat][{{ freelinkitem_row3level }}][subcat][{{ fl_4lv_row }}][image]" value="{{ subcat4level['image'] }}" id="input-image-freelink-4lv-{{ freelinkitem_row }}-{{ freelinkitem_row3level }}-{{ fl_4lv_row }}-{{ language['language_id'] }}" />
																			</div>
																			<input class="form-control" placeholder="{{ ns_text_menu_name }}" type="text" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][subcat][{{ freelinkitem_row3level }}][subcat][{{ fl_4lv_row }}][title]" value="{{ subcat4level['title'] ?? '' }}" />
																			<input class="form-control" placeholder="{{ ns_text_menu_link }}" type="text" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][subcat][{{ freelinkitem_row3level }}][subcat][{{ fl_4lv_row }}][link]" value="{{ subcat4level['link'] ?? '' }}" />
																			<span class="input-group-btn"><a class="btn btn-danger" onclick="$('#language-freelink-{{ language['language_id'] }} #freelink-4lv-item-{{ freelinkitem_row }}-{{ freelinkitem_row3level }}-{{ fl_4lv_row }}').remove();" data-toggle="tooltip" title="{{ text_delete }}"><i class="fa fa-trash-o"></i></a></span>
																		</div>
																	</div>
																	{% set fl_4lv_row = fl_4lv_row + 1 %}
																	<script>
																	Sortable.create(document.querySelector('#language-freelink-{{ language['language_id'] }} #subcatfreelink-row-{{ freelinkitem_row }}{{ freelinkitem_row3level }} .freelink-4lv-list'), {
																		handle: '.handle',
																		animation: 150,
																	});
																	</script>
																{% endfor %}
															{% endif %}
														</div>


														<button class="btn btn-success btn-xs mt-10 mb-5" onclick="addFreelinkItem4level('{{ freelinkitem_row }}','{{ freelinkitem_row3level }}','{{ language['language_id'] }}');" type="button">{{ text_add_4level }}</button>
														<hr>
													{% set freelinkitem_row3level = freelinkitem_row3level + 1 %}
													</div>
												{% endfor %}
												{% endif %}
												<input type="hidden" id="subcatfreelink-row-number-{{ freelinkitem_row }}" value="{{ freelinkitem_row3level }}">
											</div>
											<a class="btn btn-success" onclick="addFreelinkItem3level('{{ freelinkitem_row }}','{{ language['language_id'] }}');">{{ text_add }}</a>
										</td>
										<td class="text-left">
											<input  class="form-control" type="text" name="menuvh[sfl][freelink_item][{{ language['language_id'] }}][{{ freelinkitem_row }}][sort]" value="{{ freelink_item['sort'] }}" />
										</td>
										<td class="text-right">
											<a class="btn btn-danger" onclick="$('#freelinkitem-row{{ freelinkitem_row }}').remove();" data-toggle="tooltip" title="{{ text_delete }}"><i class="fa fa-trash-o"></i></a>
										</td>
									</tr>
								{% set freelinkitem_row = freelinkitem_row + 1 %}
								{% endfor %}
								{% endif %}
								<input type="hidden" id="freelink-row-number" value="{{ freelinkitem_row }}">
								</tbody>
								<tfoot>
									<tr>
										<td colspan="4"></td>
										<td class="text-right"><a class="btn btn-primary" onclick="addFreelinkItem('{{ language['language_id'] }}');" data-toggle="tooltip" title="{{ text_add }}"><i class="fa fa-plus-circle"></i></a></td>
									</tr>
								</tfoot>
							</table>
						</div>
					{% endfor %}
					</div>
				</div>

				<div class="show_elements_add_html">
				<div class="form-group">
					<label class="col-sm-3 control-label" for="input_use_html_category">{{ ns_text_add_html }}</label>
					<div class="col-sm-9">
						<div class="form-group">
							<div class="col-sm-12">
								<select id="input_use_html_category" name="menuvh[use_add_html]" class="form-control">
									{% if (use_add_html) %}
									<option value="1" selected="selected">{{ text_enabled }}</option>
									<option value="0">{{ text_disabled }}</option>
									{% else %}
									<option value="1">{{ text_enabled }}</option>
									<option value="0" selected="selected">{{ text_disabled }}</option>
									{% endif %}
								</select>
							</div>
						</div>
						<ul class="nav nav-tabs" id="language_add_html">
							{% for language in languages %}
								<li><a href="#language_add_html_{{ language['language_id'] }}" data-toggle="tab"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /> {{ language['name'] }}</a></li>
							{% endfor %}
						</ul>
						<div class="tab-content">
							{% for language in languages %}
								<div class="tab-pane" id="language_add_html_{{ language['language_id'] }}">
									<div class="form-group required">
										<div class="col-sm-12">
											<textarea data-toggle="summernote" data-lang="{{ summernote }}" class="form-control" name="menuvh[add_html][{{ language['language_id'] }}]" id="input_add_html_description_{{ language['language_id'] }}">{{ add_html[language['language_id']] is defined ? add_html[language['language_id']] : '' }}</textarea>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="input-status">{{ ns_text_status }}</label>
					<div class="col-sm-9">
						<select name="menuvh[status]" id="input-status" class="form-control">
							{% if (menuvh['status']) %}
							<option value="1" selected="selected">{{ text_enabled }}</option>
							<option value="0">{{ text_disabled }}</option>
							{% else %}
							<option value="1">{{ text_enabled }}</option>
							<option value="0" selected="selected">{{ text_disabled }}</option>
							{% endif %}
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="input-status">{{ ns_text_sticker_parent }}</label>
					<div class="col-sm-9">
						{% for language in languages %}
							<div class="input-group pull-left">
								<span class="input-group-addon"><img src="language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span>
								<input id="sticker_parent_{{ language['language_id'] }}" class="form-control" type="text" name="menuvh[sticker_parent][{{ language['language_id'] }}]" value="{{ menuvh['sticker_parent'][language['language_id']] is defined ? menuvh['sticker_parent'][language['language_id']] : '' }}" />
							</div>
						{% endfor %}
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label">{{ ns_text_sticker_parent_bg }}</label>
					<div class="col-sm-9">
						<input class="form-control color" type="text" name="menuvh[sticker_parent_bg]" value="{{ menuvh['sticker_parent_bg'] is defined ? menuvh['sticker_parent_bg'] : '' }}" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label">{{ ns_text_sticker_parent_color }}</label>
					<div class="col-sm-9">
						<input class="form-control color" type="text" name="menuvh[spctext]" value="{{ menuvh['spctext'] is defined ? menuvh['spctext'] : '' }}" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label">{{ ns_text_sort_menu }}</label>
					<div class="col-sm-9">
						<input class="form-control" type="text" name="menuvh[sort_menu]" value="{{ menuvh['sort_menu'] is defined ? menuvh['sort_menu'] : '' }}" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="input-image">{{ ns_text_thumb }}</label>
					<div class="col-sm-9">
						<a href="" id="thumb-image-menu" data-toggle="image" class="img-thumbnail"><img src="{{ menuvh['thumb'] }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
						<input type="hidden" name="menuvh[image]" value="{{ menuvh['image'] }}" id="input-image-menu" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-3 control-label" for="input-image-hover">{{ ns_text_thumb_hover }}</label>
					<div class="col-sm-9">
						<a href="" id="thumb-image-menu-hover" data-toggle="image" class="img-thumbnail"><img src="{{ menuvh['thumb_hover'] }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
						<input type="hidden" name="menuvh[image_hover]" value="{{ menuvh['image_hover'] }}" id="input-image-menu-hover" />
					</div>
				</div>

			</form>
		</div>
	</div>

</div>
 <script type="text/javascript" src="view/javascript/summernote/summernote.js"></script>
  <link href="view/javascript/summernote/summernote.css" rel="stylesheet" />
  <script type="text/javascript" src="view/javascript/summernote/summernote-image-attributes.js"></script>
  <script type="text/javascript" src="view/javascript/summernote/opencart.js"></script>
<script>
$(document).ready(function() {
	sel_type_category();
	$('#language_add_html a:first').tab('show');
	$('#language_html a:first').tab('show');
	$('#language-freelink-menu a:first').tab('show');
});
function sel_type_category(){
	$('.show_elements').hide();
	sel_menu_type = $("#input-menu-type :selected").val();
	sel_category_type = $("#input_variant_category :selected").val();
	sel_freelink_type = $("#input_variant_freelink :selected").val();
	$(".show_elements_"+sel_menu_type).show();

		if((sel_menu_type=="category" && (sel_category_type=="simple" || sel_category_type=="0")) || sel_menu_type=="0" || sel_menu_type=="freelink" || sel_menu_type=="information"  || sel_menu_type=="link" || sel_menu_type=="html"){
			$('.show_elements_add_html').hide();
		} else {
			$('.show_elements_add_html').show();
		}
		if((sel_menu_type=="category" && (sel_category_type=="simple"))){
			$('.show_elements_category .type_full_show').hide();
			$('.show_elements_category .type_full_show_img').hide();
			$('.show_elements_category .number_column_sc').hide();
		} else {
			$('.show_elements_category .number_column_sc').show();
			$('.show_elements_category .type_full_show').show();
			$('.show_elements_category .type_full_show_img').show();
		}
		if((sel_menu_type=="category" && (sel_category_type=="full" || sel_category_type=="full_masonry"))){
			$('.show_elements_category .type_full_show_img').hide();
		}

		if((sel_menu_type=="category" && (sel_category_type=="full_3_level" || sel_category_type=="full_3_level_image"))){
			$('.show_elements_category .type_full_show_img').hide();
			$('.show_elements_category .number_column_sc').hide();
			if(sel_category_type=="full_3_level_image"){
				$('.show_elements_category .type_full_show_img').show();
			}
		}

		if(sel_menu_type=="freelink" && (sel_freelink_type=="simple")){
			$('.show_elements_freelink .freelink_number_column_sc').hide();
			$('.show_elements_freelink .type_full_show_img').hide();
		} else {
			$('.show_elements_freelink .freelink_number_column_sc').show();
			$('.show_elements_freelink .type_full_show_img').show();
		}
		if(sel_menu_type=="freelink" && (sel_freelink_type=="full" || sel_freelink_type=="full_masonry")){
			$('.show_elements_freelink .type_full_show_img').hide();
		}
		if(sel_menu_type=="freelink" && (sel_freelink_type=="full_3_level")){
			$('.show_elements_freelink .type_full_show_img').hide();
			$('.show_elements_freelink .freelink_number_column_sc').hide();
		}
}



$('#input-category').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=catalog/category/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['category_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('#input-category').val('');
		$('#category-item-' + item['value']).remove();
		cathtml1  = '<div class="row-category-menu" id="category-item-' + item['value'] + '">';
		cathtml1 += '<i class="del-cat fa fa-minus-circle"></i>';
		cathtml1 += '<span>'+item['label']+'</span>';
		cathtml1 += '<input type="hidden" name="menuvh[category_setting][category_list][]" value="' + item['value'] + '" /></div>';

		$('#category-category').append(cathtml1);
	}
});
$('#category-category').delegate('.del-cat', 'click', function() {
	$(this).parent().remove();
});

$('#input-product').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=catalog/product/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['product_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('#input-product').val('');
		$('#product-item' + item['value']).remove();
		$('#product-product').append('<div id="product-item' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="menuvh[product][products_list][]" value="' + item['value'] + '" /></div>');
	}
});
$('#product-product').delegate('.fa-minus-circle', 'click', function() {
	$(this).parent().remove();
});


function addFreelinkItem(language_id) {
	var freelinkitem_row = $('#freelink-row-number').val();
	$('#freelink-row-number').val(parseInt(freelinkitem_row) + 1);
	html  = '<tr id="freelinkitem-row'+ freelinkitem_row +'">';
	html += '<td class="text-center"><a href="" id="thumb-image-freelink-'+ freelinkitem_row +'-'+ language_id +'" data-toggle="image" class="img-thumbnail"><img src="{{ placeholder }}"  /></a><input type="hidden" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][image]" value="" id="input-image-freelink-'+ freelinkitem_row +'-'+ language_id +'" /></td>';
	html += '<td class="text-left">';
	html += '<input class="form-control" type="text" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][title]" value="" />';
	html += '</td>';
	html += '<td class="text-left">';
	html += '<input class="form-control"  type="text" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][link]" value="" />';
	html += '<td class="text-left ns-input-group" style="min-width:250px;">';
	html += '	<div id="subcatfreelink'+ freelinkitem_row +'">';
	html += '		<input type="hidden" id="subcatfreelink-row-number-'+ freelinkitem_row +'" value="0">';
	html += '	</div>';
	html += '	<a class="btn btn-success" onclick="addFreelinkItem3level('+ freelinkitem_row +',\''+ language_id +'\');">{{ text_add }}</a>';
	html += '</td>';
	html += '</td>';
	html += '<td class="text-left"><input class="form-control" type="text" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][sort]" size="1" value="" /></td>';
	html += '<td class="text-right"><a class="btn btn-danger" onclick="$(\'#freelinkitem-row'+ freelinkitem_row +'\').remove();" data-toggle="tooltip" title="{{ text_delete }}"><i class="fa fa-trash-o"></i></a></td>';
	html += '</tr>';

	$('#language-freelink-'+ language_id +' #freelinkitems tbody').append(html);

	freelinkitem_row++;
}


function addFreelinkItem3level(freelinkitem_row, language_id) {
	var freelinkitem_row3level = $('#language-freelink-'+ language_id +' #subcatfreelink-row-number-'+ freelinkitem_row).val();
	$('#language-freelink-'+ language_id +' #subcatfreelink-row-number-'+ freelinkitem_row).val(parseInt(freelinkitem_row3level) + 1);

	html  = '<div id="subcatfreelink-row-'+ freelinkitem_row + freelinkitem_row3level+'">';
	html += '	<div class="input-group">';
	html += '		<div class="input-group-btn"><a class="btn btn-success sortable-module" href="javascript:void(0)"><i class="fa fa-hand-rock-o" aria-hidden="true"></i></a></div>';

	html += '	<div class="input-group-btn">';
	html += '		<a href="" id="thumb-image-freelink-3lv-'+ freelinkitem_row +'-'+ freelinkitem_row3level +'-'+ language_id +'" data-toggle="image" class="img-thumbnail">';
	html += '			<img src="{{ placeholder }}" alt="" title="" data-placeholder="{{ placeholder }}"  />';
	html += '		</a>';
	html += '		<input type="hidden" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][subcat]['+ freelinkitem_row3level +'][image]" value="" id="input-image-freelink-3lv-'+ freelinkitem_row +'-'+ freelinkitem_row3level +'-'+ language_id +'" />';
	html += '	</div>';

	html += '		<input class="form-control" placeholder="{{ ns_text_menu_name }}" type="text" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][subcat]['+ freelinkitem_row3level +'][title]" value="" />';
	html += '		<input class="form-control" placeholder="{{ ns_text_menu_link }}" type="text" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][subcat]['+ freelinkitem_row3level +'][link]" value="" />';
	html += '		<span class="input-group-btn"><a class="btn btn-danger" onclick="$(\'#language-freelink-'+ language_id +' #subcatfreelink-row-'+ freelinkitem_row + freelinkitem_row3level+'\').remove();" data-toggle="tooltip" title="<?php echo $text_delete; ?>"><i class="fa fa-trash-o"></i></a></span>';
	html += '	</div>';
	html += '	<div class="freelink-4lv-list"></div>';
	html += '	<button class="btn btn-success btn-xs mt-10 mb-5" onclick="addFreelinkItem4level('+ freelinkitem_row +','+ freelinkitem_row3level +','+ language_id +');" type="button">{{ text_add_4level }}</button>';
	html += '<hr>';
	html += '</div>';

	$('#language-freelink-'+ language_id +' #subcatfreelink'+freelinkitem_row).append(html);

	freelinkitem_row3level++;
}

function addFreelinkItem4level(freelinkitem_row, freelinkitem_row3level, language_id) {
	var fl_4lv_row = 0;

	if ($('#language-freelink-'+ language_id +' #subcatfreelink-row-' + freelinkitem_row + freelinkitem_row3level + ' div.freelink-4lv-item').length) {
		for (var i = 0; i < $('#language-freelink-'+ language_id +' #subcatfreelink-row-' + freelinkitem_row + freelinkitem_row3level + ' div.freelink-4lv-item').length + 1; i++) {
			if ($('#language-freelink-'+ language_id +' #freelink-4lv-item-' + freelinkitem_row + '-' + freelinkitem_row3level + '-' + i).length === 0) {
				fl_4lv_row = i;
				break;
			}
		}
	}

	html  = '<div id="freelink-4lv-item-' + freelinkitem_row + '-' + freelinkitem_row3level + '-' + fl_4lv_row + '" class="freelink-4lv-item mt-10">';
	html += '	<div class="input-group">';
	html += '		<div class="input-group-btn"><a class="btn btn-success handle" href="javascript:void(0)"><i class="fa fa-hand-rock-o" aria-hidden="true"></i></a></div>';

	html += '	<div class="input-group-btn">';
	html += '		<a href="" id="thumb-image-freelink-4lv-'+ freelinkitem_row +'-'+ freelinkitem_row3level +'-'+ fl_4lv_row +'-'+ language_id +'" data-toggle="image" class="img-thumbnail">';
	html += '			<img src="{{ placeholder }}" alt="" title="" data-placeholder="{{ placeholder }}"  />';
	html += '		</a>';
	html += '		<input type="hidden" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][subcat]['+ freelinkitem_row3level +'][subcat]['+ fl_4lv_row +'][image]" value="" id="input-image-freelink-4lv-'+ freelinkitem_row +'-'+ freelinkitem_row3level +'-'+ fl_4lv_row +'-'+ language_id +'" />';
	html += '	</div>';

	html += '		<input class="form-control" placeholder="{{ ns_text_menu_name }}" type="text" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][subcat]['+ freelinkitem_row3level +'][subcat]['+ fl_4lv_row +'][title]" value="" />';
	html += '		<input class="form-control" placeholder="{{ ns_text_menu_link }}" type="text" name="menuvh[sfl][freelink_item]['+ language_id +']['+ freelinkitem_row +'][subcat]['+ freelinkitem_row3level +'][subcat]['+ fl_4lv_row +'][link]" value="" />';
	html += '		<span class="input-group-btn"><a class="btn btn-danger" onclick="$(\'#language-freelink-'+ language_id +' #freelink-4lv-item-'+ freelinkitem_row + '-' + freelinkitem_row3level + '-' + fl_4lv_row +'\').remove();" data-toggle="tooltip" title="<?php echo $text_delete; ?>"><i class="fa fa-trash-o"></i></a></span>';
	html += '	</div>';
	html += '</div>';

	$('#language-freelink-'+ language_id +' #subcatfreelink-row-' + freelinkitem_row + freelinkitem_row3level + ' .freelink-4lv-list').append(html);

	Sortable.create(document.querySelector('#language-freelink-'+ language_id +' #subcatfreelink-row-' + freelinkitem_row + freelinkitem_row3level + ' .freelink-4lv-list'), {
		handle: '.handle',
		animation: 150,
	});

}
</script>
{{ footer }}
