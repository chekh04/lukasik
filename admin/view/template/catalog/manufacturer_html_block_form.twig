{{ header }}{{ column_left }}
<div id="content">
	<div class="page-header">
		<div class="container-fluid">
			<div class="pull-right">
				<button type="submit" form="form-manufacturer-html-block" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
				<a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
				<h1><?php echo $heading_title; ?></h1>
				<h1>{{ heading_title }}</h1>
				<ul class="breadcrumb">
					{% for breadcrumb in breadcrumbs %}
						<li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>
		<div class="container-fluid">
			{% if error_warning %}
				<div class="alert alert-danger">
					<i class="fa fa-exclamation-circle"></i> {{ error_warning }}
					<button type="button" class="close" data-dismiss="alert">&times;</button>
				</div>
			{% endif %}
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_form }}</h3>
				</div>
				<div class="panel-body">
					<form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-manufacturer-html-block" class="form-horizontal">
						<div class="form-group">
							<label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
							<div class="col-sm-10">
								<select name="status" id="input-status" class="form-control">
									<option value="1" {% if status %}selected="selected"{% endif %}>{{ text_enabled }}</option>
									<option value="0" {% if not status %}selected="selected"{% endif %}>{{ text_disabled }}</option>
								</select>
							</div>
						</div>
						<div class="form-group required">
							<label class="col-sm-2 control-label">{{ entry_title }}</label>
							<div class="col-sm-10">
								{% for language in languages %}
									<div class="input-group">
										<span class="input-group-addon">
											<img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" />
										</span>
										<input type="text" name="block_description[{{ language.language_id }}][title]" value="{% if block_description[language.language_id] is defined %}{{ block_description[language.language_id].title }}{% endif %}" placeholder="{{ entry_title }}" id="input-title{{ language.language_id }}" class="form-control" />
									</div>
									{% if error_title[language.language_id] is defined %}
										<div class="text-danger">{{ error_title[language.language_id] }}</div>
									{% endif %}
								{% endfor %}
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" for="input-position">{{ entry_position }}</label>
							<div class="col-sm-10">
								<select name="position" id="input-position" class="form-control">
									<option value="top" {% if position == 'top' %}selected="selected"{% endif %}>{{ text_position_top }}</option>
									<option value="bottom" {% if position == 'bottom' %}selected="selected"{% endif %}>{{ text_position_bottom }}</option>
								</select>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" for="input-status-show-for-all">{{ entry_show_for_all }}</label>
							<div class="col-sm-10">
								<select name="show_for_all" id="input-status-show-for-all" class="form-control">
									<option value="1" {% if show_for_all %}selected="selected"{% endif %}>{{ text_enabled }}</option>
									<option value="0" {% if not show_for_all %}selected="selected"{% endif %}>{{ text_disabled }}</option>
								</select>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label" for="input-show-manufacturer">{{ entry_show_manufacturer }}</label>
							<div class="col-sm-10">
								<input type="text" name="manufacturer_name" value="" placeholder="{{ entry_show_manufacturer }}" id="input-show-manufacturer" class="form-control" />
								<div id="show-manufacturer" class="well well-sm" style="height: 150px; overflow: auto;">
									{% for manufacturer in show_manufacturers %}
										<div id="show-manufacturer{{ manufacturer.manufacturer_id }}">
											<i class="fa fa-minus-circle"></i> {{ manufacturer.name }}
											<input type="hidden" name="show_manufacturers[]" value="{{ manufacturer.manufacturer_id }}" />
										</div>
									{% endfor %}
								</div>
							</div>
						</div>
						<ul class="nav nav-tabs" id="language">
							{% for language in languages %}
								<li><a href="#language{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
							{% endfor %}
						</ul>
						<div class="tab-content">
							{% for language in languages %}
								<div class="tab-pane" id="language{{ language.language_id }}">
									<div class="form-group">
										<label class="col-sm-2 control-label" for="input-description{{ language.language_id }}">
											{{ entry_desccription }}
											<div class="variables">
												{{ text_variable_manufacturer_name }}<br>
												{{ text_variable_manufacturer_link }}<br>
												{{ text_variable_manufacturer_image }}
											</div>
										</label>
										<div class="col-sm-10">
											<textarea data-toggle="summernote" data-lang="{{ summernote }}" name="block_description[{{ language.language_id }}][description]" placeholder="{{ entry_desccription }}" id="input-description{{ language.language_id }}" class="form-control">{% if block_description[language.language_id] is defined %}{{ block_description[language.language_id].description }}{% endif %}</textarea>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					</form>
				</div>
			</div>
		</div>
		<link href="view/javascript/codemirror/lib/codemirror.css" rel="stylesheet"/>
		<link href="view/javascript/codemirror/theme/monokai.css" rel="stylesheet"/>
		<script type="text/javascript" src="view/javascript/codemirror/lib/codemirror.js"></script>
		<script type="text/javascript" src="view/javascript/codemirror/lib/xml.js"></script>
		<script type="text/javascript" src="view/javascript/codemirror/lib/formatting.js"></script>
		<script type="text/javascript" src="view/javascript/summernote/summernote.js"></script>
		<link href="view/javascript/summernote/summernote.css" rel="stylesheet"/>
		<script type="text/javascript" src="view/javascript/summernote/summernote-image-attributes.js"></script>
		<script type="text/javascript" src="view/javascript/summernote/opencart.js"></script>

		<script>
		$('input[name=\'manufacturer_name\']').autocomplete({
			source: function(request, response) {
				$.ajax({
					url: 'index.php?route=catalog/manufacturer/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
					dataType: 'json',
					success: function(json) {
						response($.map(json, function(item) {
							return {
								label: item['name'],
								value: item['manufacturer_id']
							}
						}));
					}
				});
			},
			select: function(item) {
				$('input[name=\'manufacturer_name\']').val('');

				$('#show-manufacturer' + item['value']).remove();

				$('#show-manufacturer').append('<div id="show-manufacturer' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="show_manufacturers[]" value="' + item['value'] + '" /></div>');
			}
		});

		$('#show-manufacturer').delegate('.fa-minus-circle', 'click', function() {
			$(this).parent().remove();
		});

		$('#language a:first').tab('show');
		</script>
	</div>
	<?php echo $footer; ?>