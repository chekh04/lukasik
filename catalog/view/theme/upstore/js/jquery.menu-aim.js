!function(t,i,e,o){var s="menuAim",n={triggerEvent:"hover",rowSelector:"> li",handle:"> a",submenuSelector:"*",submenuDirection:"right",openClassName:"open",tolerance:75,activationDelay:0,mouseLocsTracked:3,defaultDelay:700,enterCallback:t.noop,activateCallback:t.noop,deactivateCallback:t.noop,exitCallback:t.noop,exitMenuCallback:t.noop,exitMenuDelay:1e3,exitMenuActiveLastRow:t.noop};function a(i,e){this.el=i,this.options=t.extend({},n,e),this._defaults=n,this._name=s,this.init()}a.prototype={init:function(){this.activeRow=null,this.mouseLocs=[],this.lastDelayLoc=null,this.timeoutId=null,this.openDelayId=null,this.isOnClick=t.inArray(this.options.triggerEvent,["both","click"])>-1,this.isOnHover=t.inArray(this.options.triggerEvent,["both","hover"])>-1,this.isOnHover&&this._hoverTriggerOn(),this.isOnClick&&this._clickTriggerOn()},_mouseMoveDocument:function(t){(obj=t.data.obj).mouseLocs.push({x:t.pageX,y:t.pageY}),obj.mouseLocs.length>obj.options.mouseLocsTracked&&obj.mouseLocs.shift()},_mouseLeaveMenu:function(t){(obj=t.data.obj).timeoutId&&clearTimeout(obj.timeoutId),obj.openDelayId&&clearTimeout(obj.openDelayId),lastActiveRow=obj.activeRow,obj._possiblyDeactivate(obj.activeRow),obj.options.exitMenuCallback(this),obj.options.exitMenuActiveLastRow(lastActiveRow)},_mouseEnterRow:function(t){(obj=t.data.obj).timeoutId&&clearTimeout(obj.timeoutId),obj.options.enterCallback(this),obj._possiblyActivate(this)},_mouseLeaveRow:function(t){t.data.obj.options.exitCallback(this)},_clickRow:function(i){(obj=i.data.obj)._activate(this),t(obj.el).find(obj.options.rowSelector).find(obj.options.handle).on("click",{obj:obj},obj._clickRowHandle)},_clickRowHandle:function(i){obj=i.data.obj,t(this).closest("li").hasClass(obj.options.openClassName)&&(obj._deactivate(),i.stopPropagation())},_activate:function(t){if(t&&1===t.nodeType&&(t.classList.contains("dropdown")||t.classList.contains("nsmenu-issubchild")||t.classList.contains("ischild_4level_simple"))){var i=this;t!=this.activeRow&&(this.openDelayId&&clearTimeout(this.openDelayId),parseInt(i.options.activationDelay,0)>0&&i.isOnHover?i.activeRow?i._activateWithoutDelay(t):this.openDelayId=setTimeout(function(){i._activateWithoutDelay(t)},i.options.activationDelay):i._activateWithoutDelay(t))}else{var e=$(t).next(this.options.rowSelector);e.length>0?this._activate(e[0]):this._deactivate()}},_activateWithoutDelay:function(t){this.activeRow&&this.options.deactivateCallback(this.activeRow),this.options.activateCallback(t),this.activeRow=t},_deactivate:function(){this.openDelayId&&clearTimeout(this.openDelayId),this.activeRow&&(this.options.deactivateCallback(this.activeRow),this.activeRow=null)},_possiblyActivate:function(t){var i=this._activationDelay(),e=this;i?this.timeoutId=setTimeout(function(){e._possiblyActivate(t)},i):this._activate(t)},_possiblyDeactivate:function(t){var i=this._activationDelay(),e=this;i?this.timeoutId=setTimeout(function(){e._possiblyDeactivate(t)},i):(this.options.deactivateCallback(t),this.activeRow=null)},_activationDelay:function(){if(!this.activeRow||!t(this.activeRow).is(this.options.submenuSelector))return 0;var i=t(this.el).offset(),e={x:i.left,y:i.top-this.options.tolerance},o={x:i.left+t(this.el).outerWidth(),y:e.y},s={x:i.left,y:i.top+t(this.el).outerHeight()+this.options.tolerance},n={x:i.left+t(this.el).outerWidth(),y:s.y},a=this.mouseLocs[this.mouseLocs.length-1],c=this.mouseLocs[0];if(!a||(c||(c=a),c.x<i.left||c.x>n.x||c.y<i.top||c.y>n.y||this.lastDelayLoc&&a.x==this.lastDelayLoc.x&&a.y==this.lastDelayLoc.y))return 0;function l(t,i){return(i.y-t.y)/(i.x-t.x)}var h=o,u=n;"left"==this.options.submenuDirection?(h=s,u=e):"below"==this.options.submenuDirection?(h=n,u=s):"above"==this.options.submenuDirection&&(h=e,u=o);var r=l(a,h),v=l(a,u),f=l(c,h),p=l(c,u);return r<f&&v>p?(this.lastDelayLoc=a,this.options.defaultDelay):(this.lastDelayLoc=null,0)},_outsideMenuClick:function(i){var e=i.data.obj;t(e.el).not(i.target)&&0===t(e.el).has(i.target).length&&(e.options.deactivateCallback(e.activeRow),e.activeRow=null)},_hoverTriggerOn:function(){t(this.el).on("mouseleave",{obj:this},this._mouseLeaveMenu).find(this.options.rowSelector).on("mouseenter",{obj:this},this._mouseEnterRow).on("mouseleave",{obj:this},this._mouseLeaveRow),t(i).on("blur",{obj:this},this._mouseLeaveMenu),t(e).on("mousemove",{obj:this},this._mouseMoveDocument)},_hoverTriggerOff:function(){t(this.el).off("mouseleave",this._mouseLeaveMenu).find(this.options.rowSelector).off("mouseenter",this._mouseEnterRow).off("mouseleave",this._mouseLeaveRow),t(i).off("blur",this._mouseLeaveMenu),t(e).off("mousemove",{obj:this},this._mouseMoveDocument)},_clickTriggerOn:function(){t(this.el).find(this.options.rowSelector).on("click",{obj:this},this._clickRow),t(e).on("click",{obj:this},this._outsideMenuClick)},_clickTriggerOff:function(){t(this.el).find(this.options.rowSelector).off("click",this._clickRow),t(e).off("click",this._outsideMenuClick)},switchToHover:function(){this._clickTriggerOff(),this._hoverTriggerOn(),this.isOnHover=!0,this.isOnClick=!1},switchToClick:function(){this._hoverTriggerOff(),this._clickTriggerOn(),this.isOnHover=!1,this.isOnClick=!0}},t.fn[s]=function(i){var e,n=arguments;return i===o||"object"==typeof i?this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new a(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?(this.each(function(){var o=t.data(this,"plugin_"+s);o instanceof a&&"function"==typeof o[i]&&(e=o[i].apply(o,Array.prototype.slice.call(n,1))),"destroy"===i&&t.data(this,"plugin_"+s,null)}),e!==o?e:this):void 0}}(jQuery,window,document);